<!DOCTYPE html>
<html>
<!-- control+alt+i opens dope editor in real time -->
<head>
     <title>weSurviv3D</title>
     <script src ="/js/aframe-v0.8.2.min.js"></script>
     <script src="js/component.js"></script>   
     <script src="js/genTerra.js"></script>  
     <script src="js/trees.js"></script>
     <script src="js/runtime.js"></script>
     <script src="js/remove-component.js"></script>
     <script src="js/collide-listener.js"></script>
     <script src="js/aframe-teleport-controls.js"></script>
     <script src="js/aframe-physics-system.js"></script>
     <script src="js/grab-listener.js"></script>
     <script src="js/mesh-smooth.js"></script>
     <script src="js/Water.js"></script>
     <script src="js/object-status.js"></script>
     <script src="https://unpkg.com/aframe-haptics-component/dist/aframe-haptics-component.min.js"></script>
    
     <!-- <script src="js/aframe-teleport-controls.min.js"></script> -->
     <script src="/socket.io/socket.io.js"></script>
     <script>
        let socket = io();
        
        //default connect event
        socket.on('connect', function() {
            console.log("connected!");
        });
        
        //spawining an object
        socket.on('Spawn_Object', function(data) {
                     

            //need to create switch statement for data
            //check to see what tool to spawn
            //spawn object
            window.TOOL_TYPE = 1;
            document.querySelector('axe').setAttribute('visible','true');
            //NEED EVENT LISTERN TO DETECT WHICH TOOL IS SELECTED//
        
            //create rgb color string for css
            let confirmationStr = 'boolean: ' + data.b + '.';
            console.log("boolean received: " + confirmationStr);
        });
     </script>
    
</head>
<body>
    <!-- stats -->
    <a-scene shadow="type: pcfbasic"  physics="driver: local; contactEquationStiffness: 1000; gravity: 0; friction: 100;">

        <a-assets>
          
            <!-- SOUNDS -->
            <a-asset-item crossorigin="anonymous" id="axeSound" src="/assets/sound/Axe_Hit.mp3" response-type="arraybuffer"></a-asset-item>
          
            <!-- IMAGES -->

            <img id="skymap" src="/assets/textures/SynthSet.png"> 
  
            <img id="popcornGreen" src="/assets/textures/Popcorn_green.png">
            <img id="popcornYellow" src="/assets/textures/Popcorn_yellow.png"> 
            <img id="popcornRed" src="/assets/textures/Popcorn_red.png"> 
            <img id="popcornPurple" src="/assets/textures/Popcorn_purple.png">

            <img id="pointyGreen" src="/assets/textures/GreenPointyTree.png">
            <img id="pointylight" src="/assets/textures/LightGreenPointyTree.png">
            <img id="pointyBrown" src="/assets/textures/BrownPointyTree.png"> 
            <img id="pointyPurple" src="/assets/textures/PurplePointyTree.png">

            <img id="rock" src="/assets/textures/rock.png"> 
            <img id="twig" src="/assets/textures/Twig.png"> 

            <!-- tool textures-->
            <img id="Axe_1-mtl" src="/assets/textures/axesc.png"> 

            <!-- Controller -->
            <a-asset-item id="leftController" src="/assets/models/oculus-touch-controller-left.obj"></a-asset-item>
            <a-asset-item id="rightController" src="/assets/models/oculus-touch-controller-right.obj"></a-asset-item>
            <a-asset-item id="rightController-mat" src="/assets/textures/oculus-touch-controller-right.mtl"></a-asset-item>
            <a-asset-item id="leftController-mat" src="/assets/textures/oculus-touch-controller-left.mtl"></a-asset-item>
            
            <!-- Trees -->
            <a-asset-item id="tree_1-obj" src="/assets/models/poptree.obj"></a-asset-item>
            <a-asset-item id="tree_2-obj" src="/assets/models/IceCreme_tree.obj"></a-asset-item>
            <a-asset-item id="tree_3-obj" src="/assets/models/tree_2_2.obj"></a-asset-item>
            <!--<a-asset-item id="thicc-tree-obj" src="/assets/models/ThiccTree.obj"></a-asset-item>-->

            <!-- Rocks -->
            <a-asset-item id="Round_Rock-obj" src="/assets/models/rock_01.obj"></a-asset-item>
            <a-asset-item id="rock_01-obj" src="/assets/models/Rock1.obj"></a-asset-item>
            <a-asset-item id="rock_02-obj" src="/assets/models/Rock2.obj"></a-asset-item>
            <a-asset-item id="rock_03-obj" src="/assets/models/Rock3.obj"></a-asset-item>
            <a-asset-item id="rock_04-obj" src="/assets/models/Rock4.obj"></a-asset-item>
            <a-asset-item id="rock_05-obj" src="/assets/models/Rock5.obj"></a-asset-item>

            <!-- Trees -->
            <a-asset-item id="pointy-tree-obj" src="/assets/models/pointyTree.obj"></a-asset-item>
            <a-asset-item id="Twig-1-obj" src="/assets/models/Twig_1.obj"></a-asset-item>
            <a-asset-item id="bush1" src="/assets/models/Bowl_Bush.obj"></a-asset-item>
            <a-asset-item id="bush2" src="/assets/models/Spikey_Bush.obj"></a-asset-item>

            <!-- Misc -->
            <a-asset-item id="water-obj" src="/assets/models/plue.obj"></a-asset-item> 
            <a-asset-item id="branch-obj" src=/assets/models/branch_1.obj></a-asset-item>

            <!-- Tools -->
            <a-asset-item id="Axe_1-obj" src="/assets/models/axetest.obj"></a-asset-item>

        </a-assets>

        <a-entity id="terrainGenerationObj" mesh-smooth genterra-component genwater-component position="0 0 0"></a-entity>
        <a-entity id="sky"
                geometry="primitive:sphere; radius:500"
                material="shader:flat; src:#skymap; side:back">
        </a-entity>
        
        <!-- SOUNDS -->
        <a-entity id="createAxeSound" sound="src: #axeSound; poolSize: 5"></a-entity>

        <!-- Lights< -->
        <a-entity id="LightSUN" light="type:directional; 
        castShadow:true;
        color:#e0d498; 
        intensity:1.2; 
        shadowCameraLeft: -250;
        shadowCameraBottom: -250;
        shadowCameraRight: 250;
        shadowCameraTop: 250;
        shadowMapHeight: 512;
        shadowMapWidth: 512;" 
        scale="10 10 10" position="40 40 20"></a-entity>
        <!-- shadowCameraVisible: true; -->

        <a-entity id="LightBounce1 Side" light="type:directional; color:#e0d498; intensity:0.1;"
        scale="10 10 10" position="-40 0 -20" rotation="180 0 0"></a-entity>

        <a-entity id="LightBounce1 Side2" light="type:directional; color:#e0d498; intensity:0.1;"
        scale="10 10 10" position="40 0 20" rotation="180 0 0"></a-entity>

        <a-entity id="LightBounce2 Bottom" light="type:directional; color:#e0d498; intensity:0.1;"
        scale="10 10 10" position="0 -0.025 0" rotation="90 0 0"></a-entity>

        <a-entity light="type: ambient;  color:#e0d498;  intensity:0.3;"></a-entity>
        <!-- Lights> -->

        <a-entity id="cameraRig" position="0 0 0">
            <!-- camera -->
            <a-entity id="head" camera wasd-controls look-controls></a-entity>
            <!-- hand controls -->
            <!-- <a-entity id="left-hand" static-body="shape: box;" grab-listener constraint="type: lock" oculus-touch-controls="hand: left"></a-entity> -->
            <a-entity id="right-hand" static-body="shape: box;" haptics runtime constraint="collideConnected: false" rotation="0 0 0" scale="0.2 0.2 0.2" grab-listener oculus-touch-controls="hand: right;">

                 <!-- <a-entity id="axe" static-body="shape: box;" obj-model="obj: #Axe_1-obj;" material="src: #Axe_1-mtl" constraint="collideConnected: false" rotation="0 0 0" scale="1 1 1"></a-entity> -->
   
            </a-entity>
           
            <a-box 
            scale="0.1 0.1 0.1"
            
            id="hand"
            dynamic-body="shape: box;"
            constraint="target: #right-hand; type: pointToPoint; targetPivot: 0 0 0; axis: 0 0 0; collideConnected: false"
            visible="false"
            
                    ></a-box>
          </a-entity>

        <!-- <a-entity id="axe" position="0,0,0" scale="0.2,0.2,0.2" geometry="#Axe_1-obj" material="#Axe_1-mtl" dynamic-body="shape: box;"
        constraint="target: #right-hand; type: pointToPoint; targetPivot: 0 0 0; axis: 0 0 0;"
        ></a-entity> -->

    </a-scene>
 
</body>

</html>
